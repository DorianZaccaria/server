#In this test case we will check what will happen in the case of hash collision
SET debug_dbug="d,same_long_unique_hash";
create table t1(a blob unique);
insert into t1 values('xyz');
insert into t1 values('abc');
insert into t1 values('sachin');
insert into t1 values('sachin');
ERROR 23000: Duplicate entry 'sachin' for key 'a'
insert into t1 values('maria');
insert into t1 values('maria');
ERROR 23000: Duplicate entry 'maria' for key 'a'
drop table t1;
create table t1(a blob unique, b blob unique);
insert into t1 values('xyz', 11);
insert into t1 values('abc', 22);
insert into t1 values('sachin', 1);
insert into t1 values('sachin', 4);
ERROR 23000: Duplicate entry 'sachin' for key 'a'
insert into t1 values('maria', 2);
insert into t1 values('maria', 3);
ERROR 23000: Duplicate entry 'maria' for key 'a'
drop table t1;
create table t1(a blob , b blob , unique(a,b));
insert into t1 values('xyz', 11);
insert into t1 values('abc', 22);
insert into t1 values('sachin', 1);
insert into t1 values('sachin', 1);
ERROR 23000: Duplicate entry 'sachin-1' for key 'a'
insert into t1 values('maria', 2);
insert into t1 values('maria', 2);
ERROR 23000: Duplicate entry 'maria-2' for key 'a'
drop table t1;
